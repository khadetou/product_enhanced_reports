<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- 
        Extend invoice report to:
        1. Display product names in bold
        2. Render HTML descriptions properly (with bullet points, formatting, etc.)
    -->
    <template id="report_invoice_document_enhanced" inherit_id="account.report_invoice_document">
        
        <!-- Replace the product name display in invoice lines -->
        <xpath expr="//t[@name='account_invoice_line_accountable']/td[@name='account_invoice_line_name']" position="replace">
            <td name="account_invoice_line_name" t-att-class="padding_class">
                <!-- Display product name in bold -->
                <strong t-if="line.product_id">
                    <span t-field="line.product_id.display_name">Product Name</span>
                </strong>
                <strong t-else="">
                    <t t-set="name_parts" t-value="(line.name or '').split('\n', 1)"/>
                    <span t-out="name_parts[0] if name_parts else ''">Product Name</span>
                </strong>
                <!-- Display description below the product name -->
                <t t-if="line.product_id and line.product_id.description_sale">
                    <br/>
                    <!-- Render HTML description properly -->
                    <span t-field="line.product_id.description_sale" 
                          t-options="{'widget': 'html'}"
                          class="text-muted small">
                        Product description with HTML formatting
                    </span>
                </t>
                <t t-elif="not line.product_id and line.name">
                    <!-- Fallback: show everything after the first line as description -->
                    <t t-set="name_parts" t-value="(line.name or '').split('\n', 1)"/>
                    <t t-if="len(name_parts) > 1 and name_parts[1]">
                        <br/>
                        <span t-out="name_parts[1]" class="text-muted small">Description</span>
                    </t>
                </t>
            </td>
        </xpath>

    </template>

</odoo>

